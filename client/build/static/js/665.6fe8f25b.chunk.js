"use strict";(self.webpackChunkumbrella_dashboard_client=self.webpackChunkumbrella_dashboard_client||[]).push([[665],{2903:(e,t,s)=>{s.d(t,{Ay:()=>f,a5:()=>x,lu:()=>p,pm:()=>h,rh:()=>u});var n=s(2555),a=s(4813);const r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ynssliolfybuczopjfgn.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inluc3NsaW9sZnlidWN6b3BqZmduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NzU0NDIsImV4cCI6MjA2NzA1MTQ0Mn0.gUygOntZpba9_JVvuz4I6OdOjeqz-Bz29PXoerqWb8k"}.REACT_APP_API_URL||"https://money-production-55af.up.railway.app/api";class i extends Error{constructor(e,t,s,n){super(e),this.name="APIError",this.status=t,this.code=s,this.details=n,this.timestamp=(new Date).toISOString()}}const l=new Map,c=[];let o=!1;const d={requests:0,errors:0,averageResponseTime:0,totalResponseTime:0},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=await(async()=>{try{const{data:{session:e}}=await a.ND.auth.getSession();return null===e||void 0===e?void 0:e.access_token}catch(e){return console.error("Failed to get auth token:",e),null}})(),m=(0,n.A)({headers:(0,n.A)((0,n.A)({"Content-Type":"application/json"},s&&{Authorization:"Bearer ".concat(s)}),t.headers)},t);if(await(async e=>(e.requestId="req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.startTime=performance.now(),e.retryCount=e.retryCount||0,e))(m),"GET"===t.method||!t.method){const s=(e=>{const t=l.get(e);return t&&Date.now()-t.timestamp<3e5?t.data:(l.delete(e),null)})("".concat(e,"_").concat(JSON.stringify(t)));if(s)return s}const u=async()=>{try{const s=await fetch("".concat(r).concat(e),m);if(await(async(e,t)=>{const s=performance.now()-t.startTime;return d.requests++,d.totalResponseTime+=s,d.averageResponseTime=d.totalResponseTime/d.requests,s>1e3&&console.warn("Slow API request: ".concat(t.requestId," took ").concat(s.toFixed(2),"ms")),e})(s,m),!s.ok){const e=await s.json().catch(()=>({}));throw new i(e.message||"HTTP error! status: ".concat(s.status),s.status,e.code,e.details)}const n=await s.json();if("GET"===t.method||!t.method){((e,t)=>{l.set(e,{data:t,timestamp:Date.now()})})("".concat(e,"_").concat(JSON.stringify(t)),n)}return n}catch(s){if(d.errors++,((e,t)=>t<3&&([408,429,500,502,503,504].includes(e.status)||e.message.includes("network")||e.message.includes("timeout")))(s,m.retryCount)){m.retryCount++,console.warn("Retrying request (".concat(m.retryCount,"/3):"),e);const t=1e3*Math.pow(2,m.retryCount);return await new Promise(e=>setTimeout(e,t)),u()}throw console.error("API call failed:",{endpoint:e,requestId:m.requestId,error:s.message,status:s.status,retryCount:m.retryCount}),s}};return new Promise((e,t)=>{c.push({resolve:e,reject:t,requestFn:u}),(async()=>{if(!o&&0!==c.length){for(o=!0;c.length>0;){const{resolve:t,reject:s,requestFn:n}=c.shift();try{t(await n())}catch(e){s(e)}c.length>0&&await new Promise(e=>setTimeout(e,100))}o=!1}})()})},u={getDashboardOverview:()=>m("/analytics/dashboard/public"),getRevenueAnalytics:function(){return m("/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getUserAnalytics:function(){return m("/analytics/users?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getProjectPerformance:function(){return m("/analytics/projects?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getCustomAnalytics:(e,t)=>m("/analytics/custom?startDate=".concat(e,"&endDate=").concat(t)),exportAnalytics:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"30d",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"csv";return m("/analytics/export?type=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all","&period=").concat(e,"&format=").concat(t))}},x={getPaymentMethods:()=>m("/payments/methods"),addPaymentMethod:e=>m("/payments/methods",{method:"POST",body:JSON.stringify({paymentMethodId:e})}),removePaymentMethod:e=>m("/payments/methods/".concat(e),{method:"DELETE"}),getSubscriptions:()=>m("/payments/subscriptions"),createSubscription:(e,t)=>m("/payments/subscriptions",{method:"POST",body:JSON.stringify({priceId:e,paymentMethodId:t})}),cancelSubscription:e=>m("/payments/subscriptions/".concat(e,"/cancel"),{method:"POST"}),reactivateSubscription:e=>m("/payments/subscriptions/".concat(e,"/reactivate"),{method:"POST"}),getInvoices:()=>m("/payments/invoices"),createPaymentIntent:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",s=arguments.length>2?arguments[2]:void 0;return m("/payments/payment-intent",{method:"POST",body:JSON.stringify({amount:e,currency:t,description:s})})},getRevenueAnalytics:function(){return m("/payments/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))}},h={getAlerts:function(){return m("/monitoring/alerts?severity=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all"))},getPerformanceMetrics:()=>m("/monitoring/performance"),getSystemHealth:()=>m("/monitoring/health"),acknowledgeAlert:e=>m("/monitoring/alerts/".concat(e,"/acknowledge"),{method:"POST"}),getLogs:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return m("/monitoring/logs?serviceId=".concat(e,"&limit=").concat(t))}},p={getProfile:()=>m("/users/profile"),updateProfile:e=>m("/users/profile",{method:"PUT",body:JSON.stringify(e)}),getTeamMembers:()=>m("/users/team"),inviteTeamMember:(e,t)=>m("/users/invite",{method:"POST",body:JSON.stringify({email:e,role:t})}),removeTeamMember:e=>m("/users/team/".concat(e),{method:"DELETE"})};let g=null,j=0;const f={projects:{getProjects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,n]=e;void 0!==n&&null!==n&&t.append(s,n)}),m("/projects?".concat(t.toString()))},getProject:e=>m("/projects/".concat(e)),createProject:e=>m("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,t)=>m("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)}),deleteProject:e=>m("/projects/".concat(e),{method:"DELETE"}),getProjectAnalytics:e=>m("/projects/".concat(e,"/analytics")),getCategories:()=>m("/projects/categories/list"),getStats:()=>m("/projects/stats/overview")},analytics:u,payments:x,infrastructure:{getSystemStatus:()=>m("/infrastructure/status"),getServiceMetrics:()=>m("/infrastructure/metrics"),getResourceUsage:()=>m("/infrastructure/resources"),deployService:e=>m("/infrastructure/deploy",{method:"POST",body:JSON.stringify(e)}),restartService:e=>m("/infrastructure/services/".concat(e,"/restart"),{method:"POST"})},monitoring:h,users:p,healthCheck:()=>{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3);return fetch("".concat(r,"/health"),{signal:e.signal}).then(e=>(clearTimeout(t),e.json())).catch(e=>{throw clearTimeout(t),new i("Health check failed",0,"HEALTH_CHECK_FAILED",{error:e.message})})},initializeWebSocket:e=>{g&&g.close();const t=()=>{try{g=new WebSocket("".concat(r.replace("http","ws"),"/ws?userId=").concat(e)),g.onopen=()=>{console.log("WebSocket connected"),j=0},g.onmessage=e=>{try{const t=JSON.parse(e.data);switch(t.type){case"alert":case"metric":case"notification":break;default:console.log("WebSocket message:",t)}}catch(t){console.error("Failed to parse WebSocket message:",t)}},g.onclose=()=>{if(console.log("WebSocket disconnected"),j<5){j++;const e=1e3*Math.pow(2,j);setTimeout(()=>t(),e)}},g.onerror=e=>{console.error("WebSocket error:",e)}}catch(s){console.error("Failed to initialize WebSocket:",s)}};return t(),g}}},4665:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var n=s(2555),a=s(9950),r=s(907),i=s(5975),l=s(6307),c=s(5325);const o=(0,c.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var d=s(861),m=s(4298);const u=(0,c.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var x=s(5416),h=s(130),p=s(719);const g=(0,c.A)("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),j=(0,c.A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var f=s(5619),v=s(8306),y=s(7058),b=s(9192),N=s(8386);const w=(0,c.A)("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var A=s(4245),S=s(2330),k=s(1543),T=s(2903),C=s(4414);const P=()=>{console.log("Rendering Users");const{user:e}=(0,k.A)(),[t,s]=(0,a.useState)([]),[c,P]=(0,a.useState)(!0),[U,E]=(0,a.useState)(null),[I,L]=(0,a.useState)(""),[D,M]=(0,a.useState)("all"),[O,R]=(0,a.useState)("all"),[F,_]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(!1),[z,J]=(0,a.useState)(null),[B,W]=(0,a.useState)(!1),[H,$]=(0,a.useState)(!1),[V,Y]=(0,a.useState)(30),[K,X]=(0,a.useState)([]),[G,Q]=(0,a.useState)(""),[ee,te]=(0,a.useState)({totalUsers:0,activeUsers:0,newUsersThisMonth:0,averageLoginFrequency:0,roleDistribution:{},activityTrend:[]}),[se,ne]=(0,a.useState)({email:"",role:"user",name:"",department:"",permissions:[]});(0,a.useEffect)(()=>{ae()},[]),(0,a.useEffect)(()=>{if(!H)return;const e=setInterval(()=>{ae()},1e3*V);return()=>clearInterval(e)},[H,V]);const ae=async()=>{try{P(!0);const e={users:[]}.users||[];s(e);const t={totalUsers:e.length,activeUsers:e.filter(e=>"active"===e.status).length,newUsersThisMonth:e.filter(e=>{const t=new Date(e.createdAt||e.lastLogin),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length,averageLoginFrequency:e.length>0?e.reduce((e,t)=>e+(t.loginCount||0),0)/e.length:0,roleDistribution:e.reduce((e,t)=>(e[t.role]=(e[t.role]||0)+1,e),{}),activityTrend:e.slice(0,7).map((e,t)=>({date:new Date(Date.now()-24*(6-t)*60*60*1e3).toLocaleDateString(),active:Math.floor(10*Math.random())+1}))};te(t),E(null)}catch(e){console.error("Error fetching users:",e),E("Failed to load users");const t=[{id:1,name:"John Doe",email:"john@example.com",role:"admin",status:"active",lastLogin:"2024-01-20T10:30:00Z",projects:3,department:"Engineering",loginCount:45,createdAt:"2024-01-01T00:00:00Z",permissions:["read","write","admin"],avatar:null},{id:2,name:"Jane Smith",email:"jane@example.com",role:"user",status:"active",lastLogin:"2024-01-19T15:45:00Z",projects:1,department:"Marketing",loginCount:23,createdAt:"2024-01-05T00:00:00Z",permissions:["read","write"],avatar:null},{id:3,name:"Bob Johnson",email:"bob@example.com",role:"user",status:"inactive",lastLogin:"2024-01-15T09:20:00Z",projects:0,department:"Sales",loginCount:8,createdAt:"2024-01-10T00:00:00Z",permissions:["read"],avatar:null},{id:4,name:"Alice Brown",email:"alice@example.com",role:"manager",status:"active",lastLogin:"2024-01-20T14:20:00Z",projects:2,department:"Product",loginCount:32,createdAt:"2024-01-03T00:00:00Z",permissions:["read","write","manage"],avatar:null}];s(t);const n={totalUsers:t.length,activeUsers:t.filter(e=>"active"===e.status).length,newUsersThisMonth:2,averageLoginFrequency:27,roleDistribution:{admin:1,user:2,manager:1},activityTrend:[{date:"1/14",active:3},{date:"1/15",active:4},{date:"1/16",active:2},{date:"1/17",active:5},{date:"1/18",active:3},{date:"1/19",active:4},{date:"1/20",active:4}]};te(n)}finally{P(!1)}},re=async(e,t)=>{try{await T.Ay.updateUserRole(e,t),ae()}catch(s){console.error("Error updating user role:",s),alert("Failed to update user role")}},ie=async e=>{if(window.confirm("Are you sure you want to deactivate this user?"))try{await T.Ay.deactivateUser(e),ae()}catch(t){console.error("Error deactivating user:",t),alert("Failed to deactivate user")}},le=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ce=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800"}},oe=t.filter(e=>{const t=e.name.toLowerCase().includes(I.toLowerCase())||e.email.toLowerCase().includes(I.toLowerCase()),s="all"===D||e.role===D,n="all"===O||e.status===O;return t&&s&&n});return c?(0,C.jsx)("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)(r.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,C.jsx)("p",{className:"text-muted-foreground",children:"Loading users..."})]})}):(0,C.jsxs)("div",{className:"p-6 space-y-6",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"User Management"}),(0,C.jsx)("p",{className:"text-muted-foreground",children:"Manage team members and their permissions."})]}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,C.jsxs)(S.$n,{variant:H?"default":"outline",size:"sm",onClick:()=>$(!H),children:[(0,C.jsx)(i.A,{className:"h-4 w-4 mr-2 ".concat(H?"animate-spin":"")}),H?"Auto-refresh ON":"Auto-refresh OFF"]}),H&&(0,C.jsxs)("select",{value:V,onChange:e=>Y(Number(e.target.value)),className:"px-2 py-1 text-sm border border-border rounded bg-background",children:[(0,C.jsx)("option",{value:15,children:"15s"}),(0,C.jsx)("option",{value:30,children:"30s"}),(0,C.jsx)("option",{value:60,children:"1m"}),(0,C.jsx)("option",{value:300,children:"5m"})]})]}),(0,C.jsxs)(S.$n,{variant:"outline",onClick:()=>{const e=[["Name","Email","Role","Status","Department","Last Login","Projects"],...oe.map(e=>[e.name,e.email,e.role,e.status,e.department||"",new Date(e.lastLogin).toLocaleDateString(),e.projects])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="users-export.csv",n.click(),window.URL.revokeObjectURL(s)},children:[(0,C.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,C.jsxs)(S.$n,{onClick:()=>_(!0),children:[(0,C.jsx)(o,{className:"h-4 w-4 mr-2"}),"Invite User"]})]})]}),U&&(0,C.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"string"===typeof U?U:JSON.stringify(U)}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,C.jsx)(A.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),(0,C.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,C.jsxs)(A.Wu,{children:[(0,C.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ee.totalUsers}),(0,C.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[(0,C.jsx)(m.A,{className:"h-3 w-3 text-green-500"}),(0,C.jsxs)("span",{className:"text-green-500",children:["+",ee.newUsersThisMonth]}),(0,C.jsx)("span",{children:"this month"})]})]})]}),(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,C.jsx)(A.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),(0,C.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,C.jsxs)(A.Wu,{children:[(0,C.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ee.activeUsers}),(0,C.jsxs)("div",{className:"text-xs text-muted-foreground",children:[ee.totalUsers>0?(ee.activeUsers/ee.totalUsers*100).toFixed(1):0,"% of total"]})]})]}),(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,C.jsx)(A.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Login Frequency"}),(0,C.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,C.jsxs)(A.Wu,{children:[(0,C.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ee.averageLoginFrequency.toFixed(0)}),(0,C.jsx)("div",{className:"text-xs text-muted-foreground",children:"logins per user"})]})]}),(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,C.jsx)(A.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Pending Invites"}),(0,C.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,C.jsxs)(A.Wu,{children:[(0,C.jsx)("div",{className:"text-2xl font-bold text-foreground",children:t.filter(e=>"pending"===e.status).length}),(0,C.jsx)("div",{className:"text-xs text-muted-foreground",children:"Awaiting confirmation"})]})]})]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{children:[(0,C.jsx)(A.ZB,{children:"Role Distribution"}),(0,C.jsx)(A.BT,{children:"Breakdown of users by role"})]}),(0,C.jsx)(A.Wu,{children:(0,C.jsx)("div",{className:"space-y-3",children:Object.entries(ee.roleDistribution).map(e=>{let[t,s]=e;return(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(le(t).replace("bg-","bg-").replace("text-",""))}),(0,C.jsx)("span",{className:"text-sm font-medium capitalize",children:t})]}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("span",{className:"text-sm font-bold",children:s}),(0,C.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",ee.totalUsers>0?(s/ee.totalUsers*100).toFixed(1):0,"%)"]})]})]},t)})})})]}),(0,C.jsxs)(A.Zp,{children:[(0,C.jsxs)(A.aR,{children:[(0,C.jsx)(A.ZB,{children:"Activity Trend"}),(0,C.jsx)(A.BT,{children:"User activity over the last 7 days"})]}),(0,C.jsx)(A.Wu,{children:(0,C.jsx)("div",{className:"space-y-3",children:ee.activityTrend.map((e,t)=>(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:e.date}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,C.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.active/10*100,"%")}})}),(0,C.jsx)("span",{className:"text-sm font-medium",children:e.active})]})]},t))})})]})]}),(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,C.jsxs)("div",{className:"relative flex-1",children:[(0,C.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,C.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:I,onChange:e=>L(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,C.jsxs)("select",{value:D,onChange:e=>M(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,C.jsx)("option",{value:"all",children:"All Roles"}),(0,C.jsx)("option",{value:"admin",children:"Admin"}),(0,C.jsx)("option",{value:"manager",children:"Manager"}),(0,C.jsx)("option",{value:"user",children:"User"})]}),(0,C.jsxs)("select",{value:O,onChange:e=>R(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,C.jsx)("option",{value:"all",children:"All Status"}),(0,C.jsx)("option",{value:"active",children:"Active"}),(0,C.jsx)("option",{value:"inactive",children:"Inactive"}),(0,C.jsx)("option",{value:"pending",children:"Pending"})]})]}),K.length>0&&(0,C.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[(0,C.jsx)("div",{className:"flex items-center space-x-2",children:(0,C.jsxs)("span",{className:"text-sm font-medium",children:[K.length," user",1!==K.length?"s":""," selected"]})}),(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsxs)("select",{value:G,onChange:e=>Q(e.target.value),className:"px-3 py-1 text-sm border border-input rounded bg-background",children:[(0,C.jsx)("option",{value:"",children:"Select Action"}),(0,C.jsx)("option",{value:"activate",children:"Activate"}),(0,C.jsx)("option",{value:"deactivate",children:"Deactivate"}),(0,C.jsx)("option",{value:"delete",children:"Delete"})]}),(0,C.jsx)(S.$n,{size:"sm",onClick:async()=>{if(G&&0!==K.length)try{switch(G){case"activate":await Promise.all(K.map(e=>T.Ay.activateUser(e)));break;case"deactivate":await Promise.all(K.map(e=>T.Ay.deactivateUser(e)));break;case"delete":window.confirm("Are you sure you want to delete ".concat(K.length," users?"))&&await Promise.all(K.map(e=>T.Ay.deleteUser(e)));break;default:return void console.error("Unknown bulk action:",G)}X([]),Q(""),ae()}catch(e){console.error("Error performing bulk action:",e),alert("Failed to perform bulk action")}},disabled:!G,children:"Apply"}),(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>X([]),children:"Clear"})]})]})]}),(0,C.jsxs)(A.Zp,{children:[(0,C.jsx)(A.aR,{children:(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(A.ZB,{children:"Team Members"}),(0,C.jsxs)(A.BT,{children:["Manage user roles and permissions (",oe.length," users)"]})]}),(0,C.jsx)("div",{className:"flex items-center space-x-2",children:(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>{K.length===oe.length?X([]):X(oe.map(e=>e.id))},children:K.length===oe.length?(0,C.jsx)(g,{className:"h-4 w-4"}):(0,C.jsx)(j,{className:"h-4 w-4"})})})]})}),(0,C.jsx)(A.Wu,{children:oe.length>0?(0,C.jsx)("div",{className:"space-y-4",children:oe.map(t=>(0,C.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent transition-colors",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,C.jsx)("input",{type:"checkbox",checked:K.includes(t.id),onChange:()=>{return e=t.id,void X(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:"rounded border-gray-300"}),(0,C.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:(0,C.jsx)(d.A,{className:"h-5 w-5 text-primary"})})]}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsx)("h3",{className:"text-sm font-medium text-foreground",children:t.name}),t.id===(null===e||void 0===e?void 0:e.id)&&(0,C.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:"You"})]}),(0,C.jsx)("p",{className:"text-sm text-muted-foreground",children:t.email}),(0,C.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,C.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(le(t.role)),children:t.role}),(0,C.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(ce(t.status)),children:t.status}),t.department&&(0,C.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:t.department})]})]})]}),(0,C.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,C.jsxs)("div",{className:"text-right text-sm text-muted-foreground",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,C.jsx)(f.A,{className:"h-3 w-3"}),(0,C.jsxs)("span",{children:["Last login:"," ",new Date(t.lastLogin).toLocaleDateString()]})]}),(0,C.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,C.jsxs)("span",{children:["Projects: ",t.projects]}),(0,C.jsxs)("span",{children:["Logins: ",t.loginCount||0]})]})]}),"admin"===(null===e||void 0===e?void 0:e.role)&&t.id!==(null===e||void 0===e?void 0:e.id)&&(0,C.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,C.jsxs)("select",{value:t.role,onChange:e=>re(t.id,e.target.value),className:"text-xs px-2 py-1 border rounded bg-background",children:[(0,C.jsx)("option",{value:"user",children:"User"}),(0,C.jsx)("option",{value:"manager",children:"Manager"}),(0,C.jsx)("option",{value:"admin",children:"Admin"})]}),(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>{J(t),q(!0)},children:(0,C.jsx)(v.A,{className:"h-3 w-3"})}),(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>ie(t.id),children:(0,C.jsx)(y.A,{className:"h-3 w-3"})})]})]})]},t.id))}):(0,C.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,C.jsx)(d.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,C.jsx)("p",{children:"No users found"})]})})]}),F&&(0,C.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,C.jsxs)("div",{className:"bg-background p-6 rounded-lg w-full max-w-md",children:[(0,C.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Invite New User"}),(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{htmlFor:"name",children:"Name"}),(0,C.jsx)("input",{type:"text",value:se.name,onChange:e=>ne((0,n.A)((0,n.A)({},se),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter full name"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{htmlFor:"email",children:"Email"}),(0,C.jsx)("input",{type:"email",value:se.email,onChange:e=>ne((0,n.A)((0,n.A)({},se),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter email address"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{htmlFor:"-department-",children:"Department"}),(0,C.jsxs)("select",{value:se.department,onChange:e=>ne((0,n.A)((0,n.A)({},se),{},{department:e.target.value})),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,C.jsx)("option",{value:"",children:"Select Department"}),(0,C.jsx)("option",{value:"Engineering",children:"Engineering"}),(0,C.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,C.jsx)("option",{value:"Sales",children:"Sales"}),(0,C.jsx)("option",{value:"Product",children:"Product"}),(0,C.jsx)("option",{value:"Support",children:"Support"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{htmlFor:"role",children:"Role"}),(0,C.jsxs)("select",{value:se.role,onChange:e=>ne((0,n.A)((0,n.A)({},se),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,C.jsx)("option",{value:"user",children:"User"}),(0,C.jsx)("option",{value:"manager",children:"Manager"}),(0,C.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,C.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,C.jsx)(S.$n,{variant:"outline",onClick:()=>_(!1),disabled:B,children:"Cancel"}),(0,C.jsx)(S.$n,{onClick:async()=>{if(se.email.trim()&&se.name.trim())try{W(!0),await T.Ay.inviteUser(se),_(!1),ne({email:"",role:"user",name:"",department:"",permissions:[]}),ae()}catch(e){console.error("Error inviting user:",e),alert("Failed to invite user")}finally{W(!1)}else alert("Please fill in all required fields")},disabled:B,children:B?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Inviting..."]}):"Send Invite"})]})]})}),Z&&z&&(0,C.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,C.jsxs)("div",{className:"bg-background p-6 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,C.jsx)("h2",{className:"text-xl font-bold",children:"User Details"}),(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>{q(!1),J(null)},children:"\xd7"})]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsx)("h3",{className:"font-medium text-foreground",children:"User Information"}),(0,C.jsxs)("div",{className:"space-y-3",children:[(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Name:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.name})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Email:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.email})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Department:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.department||"Not specified"})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Role:"}),(0,C.jsx)("span",{className:"text-sm px-2 py-1 rounded-full ".concat(le(z.role)),children:z.role})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status:"}),(0,C.jsx)("span",{className:"text-sm px-2 py-1 rounded-full ".concat(ce(z.status)),children:z.status})]})]})]}),(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsx)("h3",{className:"font-medium text-foreground",children:"Activity Information"}),(0,C.jsxs)("div",{className:"space-y-3",children:[(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Last Login:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:new Date(z.lastLogin).toLocaleString()})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Login Count:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.loginCount||0})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Projects:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.projects})]}),(0,C.jsxs)("div",{className:"flex justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-muted-foreground",children:"Created:"}),(0,C.jsx)("span",{className:"text-sm font-medium",children:z.createdAt?new Date(z.createdAt).toLocaleDateString():"Unknown"})]})]})]})]}),z.permissions&&z.permissions.length>0&&(0,C.jsxs)("div",{className:"mt-6",children:[(0,C.jsx)("h3",{className:"font-medium text-foreground mb-3",children:"Permissions"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-2",children:z.permissions.map((e,t)=>(0,C.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:e},t))})]}),"admin"===(null===e||void 0===e?void 0:e.role)&&z.id!==(null===e||void 0===e?void 0:e.id)&&(0,C.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,C.jsx)("h3",{className:"font-medium text-foreground mb-3",children:"Actions"}),(0,C.jsxs)("div",{className:"flex space-x-2",children:[(0,C.jsxs)(S.$n,{variant:"outline",size:"sm",onClick:()=>re(z.id,"admin"===z.role?"user":"admin"),children:[(0,C.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Toggle Admin"]}),(0,C.jsx)(S.$n,{variant:"outline",size:"sm",onClick:()=>ie(z.id),children:"active"===z.status?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(w,{className:"h-4 w-4 mr-2"}),"Activate"]})}),(0,C.jsxs)(S.$n,{variant:"outline",size:"sm",children:[(0,C.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Resend Invite"]})]})]})]})})]})}},6307:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(5325).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7058:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(5325).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);