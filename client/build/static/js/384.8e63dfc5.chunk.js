"use strict";(self.webpackChunkumbrella_dashboard_client=self.webpackChunkumbrella_dashboard_client||[]).push([[384],{2903:(e,t,s)=>{s.d(t,{Ay:()=>v,a5:()=>h,lu:()=>x,pm:()=>p,rh:()=>u});var r=s(2555),a=s(4813);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ynssliolfybuczopjfgn.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inluc3NsaW9sZnlidWN6b3BqZmduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NzU0NDIsImV4cCI6MjA2NzA1MTQ0Mn0.gUygOntZpba9_JVvuz4I6OdOjeqz-Bz29PXoerqWb8k"}.REACT_APP_API_URL||"https://money-production-55af.up.railway.app/api";class c extends Error{constructor(e,t,s,r){super(e),this.name="APIError",this.status=t,this.code=s,this.details=r,this.timestamp=(new Date).toISOString()}}const o=new Map,i=[];let l=!1;const d={requests:0,errors:0,averageResponseTime:0,totalResponseTime:0},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=await(async()=>{try{const{data:{session:e}}=await a.ND.auth.getSession();return null===e||void 0===e?void 0:e.access_token}catch(e){return console.error("Failed to get auth token:",e),null}})(),m=(0,r.A)({headers:(0,r.A)((0,r.A)({"Content-Type":"application/json"},s&&{Authorization:"Bearer ".concat(s)}),t.headers)},t);if(await(async e=>(e.requestId="req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.startTime=performance.now(),e.retryCount=e.retryCount||0,e))(m),"GET"===t.method||!t.method){const s=(e=>{const t=o.get(e);return t&&Date.now()-t.timestamp<3e5?t.data:(o.delete(e),null)})("".concat(e,"_").concat(JSON.stringify(t)));if(s)return s}const u=async()=>{try{const s=await fetch("".concat(n).concat(e),m);if(await(async(e,t)=>{const s=performance.now()-t.startTime;return d.requests++,d.totalResponseTime+=s,d.averageResponseTime=d.totalResponseTime/d.requests,s>1e3&&console.warn("Slow API request: ".concat(t.requestId," took ").concat(s.toFixed(2),"ms")),e})(s,m),!s.ok){const e=await s.json().catch(()=>({}));throw new c(e.message||"HTTP error! status: ".concat(s.status),s.status,e.code,e.details)}const r=await s.json();if("GET"===t.method||!t.method){((e,t)=>{o.set(e,{data:t,timestamp:Date.now()})})("".concat(e,"_").concat(JSON.stringify(t)),r)}return r}catch(s){if(d.errors++,((e,t)=>t<3&&([408,429,500,502,503,504].includes(e.status)||e.message.includes("network")||e.message.includes("timeout")))(s,m.retryCount)){m.retryCount++,console.warn("Retrying request (".concat(m.retryCount,"/3):"),e);const t=1e3*Math.pow(2,m.retryCount);return await new Promise(e=>setTimeout(e,t)),u()}throw console.error("API call failed:",{endpoint:e,requestId:m.requestId,error:s.message,status:s.status,retryCount:m.retryCount}),s}};return new Promise((e,t)=>{i.push({resolve:e,reject:t,requestFn:u}),(async()=>{if(!l&&0!==i.length){for(l=!0;i.length>0;){const{resolve:t,reject:s,requestFn:r}=i.shift();try{t(await r())}catch(e){s(e)}i.length>0&&await new Promise(e=>setTimeout(e,100))}l=!1}})()})},u={getDashboardOverview:()=>m("/analytics/dashboard/public"),getRevenueAnalytics:function(){return m("/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getUserAnalytics:function(){return m("/analytics/users?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getProjectPerformance:function(){return m("/analytics/projects?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getCustomAnalytics:(e,t)=>m("/analytics/custom?startDate=".concat(e,"&endDate=").concat(t)),exportAnalytics:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"30d",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"csv";return m("/analytics/export?type=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all","&period=").concat(e,"&format=").concat(t))}},h={getPaymentMethods:()=>m("/payments/methods"),addPaymentMethod:e=>m("/payments/methods",{method:"POST",body:JSON.stringify({paymentMethodId:e})}),removePaymentMethod:e=>m("/payments/methods/".concat(e),{method:"DELETE"}),getSubscriptions:()=>m("/payments/subscriptions"),createSubscription:(e,t)=>m("/payments/subscriptions",{method:"POST",body:JSON.stringify({priceId:e,paymentMethodId:t})}),cancelSubscription:e=>m("/payments/subscriptions/".concat(e,"/cancel"),{method:"POST"}),reactivateSubscription:e=>m("/payments/subscriptions/".concat(e,"/reactivate"),{method:"POST"}),getInvoices:()=>m("/payments/invoices"),createPaymentIntent:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",s=arguments.length>2?arguments[2]:void 0;return m("/payments/payment-intent",{method:"POST",body:JSON.stringify({amount:e,currency:t,description:s})})},getRevenueAnalytics:function(){return m("/payments/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))}},p={getAlerts:function(){return m("/monitoring/alerts?severity=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all"))},getPerformanceMetrics:()=>m("/monitoring/performance"),getSystemHealth:()=>m("/monitoring/health"),acknowledgeAlert:e=>m("/monitoring/alerts/".concat(e,"/acknowledge"),{method:"POST"}),getLogs:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return m("/monitoring/logs?serviceId=".concat(e,"&limit=").concat(t))}},x={getProfile:()=>m("/users/profile"),updateProfile:e=>m("/users/profile",{method:"PUT",body:JSON.stringify(e)}),getTeamMembers:()=>m("/users/team"),inviteTeamMember:(e,t)=>m("/users/invite",{method:"POST",body:JSON.stringify({email:e,role:t})}),removeTeamMember:e=>m("/users/team/".concat(e),{method:"DELETE"})};let g=null,y=0;const v={projects:{getProjects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;void 0!==r&&null!==r&&t.append(s,r)}),m("/projects?".concat(t.toString()))},getProject:e=>m("/projects/".concat(e)),createProject:e=>m("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,t)=>m("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)}),deleteProject:e=>m("/projects/".concat(e),{method:"DELETE"}),getProjectAnalytics:e=>m("/projects/".concat(e,"/analytics")),getCategories:()=>m("/projects/categories/list"),getStats:()=>m("/projects/stats/overview")},analytics:u,payments:h,infrastructure:{getSystemStatus:()=>m("/infrastructure/status"),getServiceMetrics:()=>m("/infrastructure/metrics"),getResourceUsage:()=>m("/infrastructure/resources"),deployService:e=>m("/infrastructure/deploy",{method:"POST",body:JSON.stringify(e)}),restartService:e=>m("/infrastructure/services/".concat(e,"/restart"),{method:"POST"})},monitoring:p,users:x,healthCheck:()=>{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3);return fetch("".concat(n,"/health"),{signal:e.signal}).then(e=>(clearTimeout(t),e.json())).catch(e=>{throw clearTimeout(t),new c("Health check failed",0,"HEALTH_CHECK_FAILED",{error:e.message})})},initializeWebSocket:e=>{g&&g.close();const t=()=>{try{g=new WebSocket("".concat(n.replace("http","ws"),"/ws?userId=").concat(e)),g.onopen=()=>{console.log("WebSocket connected"),y=0},g.onmessage=e=>{try{const t=JSON.parse(e.data);switch(t.type){case"alert":case"metric":case"notification":break;default:console.log("WebSocket message:",t)}}catch(t){console.error("Failed to parse WebSocket message:",t)}},g.onclose=()=>{if(console.log("WebSocket disconnected"),y<5){y++;const e=1e3*Math.pow(2,y);setTimeout(()=>t(),e)}},g.onerror=e=>{console.error("WebSocket error:",e)}}catch(s){console.error("Failed to initialize WebSocket:",s)}};return t(),g}}},9384:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var r=s(2555),a=s(9950),n=s(4245),c=s(2330),o=s(4546),i=s(2748);const l=(0,s(5325).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=s(5619),m=s(5975),u=s(7764),h=s(5416),p=s(4760),x=s(2456),g=s(1792),y=s(2903),v=s(4414);const f=()=>{var e,t;console.log("Rendering Monitoring");const[s,f]=(0,a.useState)([{name:"Response Time",value:"245ms",change:"+12ms",trend:"up"},{name:"Error Rate",value:"0.2%",change:"-0.1%",trend:"down"},{name:"Throughput",value:"1.2k req/s",change:"+150",trend:"up"},{name:"Uptime",value:"99.9%",change:"+0.1%",trend:"up"}]),[j,b]=(0,a.useState)([{id:1,title:"High CPU Usage",description:"CPU usage exceeded 80% threshold",time:"2 minutes ago",service:"Web Server",status:"active",severity:"warning"},{id:2,title:"Database Connection Slow",description:"Database response time increased by 200%",time:"5 minutes ago",service:"Database",status:"resolved",severity:"error"}]),[w,N]=(0,a.useState)({overall:"healthy",services:4,issues:1,lastCheck:(new Date).toLocaleTimeString(),services:[{name:"Web Server",status:"healthy",uptime:"99.9%",responseTime:"120ms"},{name:"Database",status:"warning",uptime:"99.5%",responseTime:"450ms"},{name:"API Gateway",status:"healthy",uptime:"99.8%",responseTime:"80ms"},{name:"Cache Service",status:"healthy",uptime:"99.7%",responseTime:"15ms"}]}),[S,T]=(0,a.useState)(!0),[A,P]=(0,a.useState)(null),[C,O]=(0,a.useState)(!1),[k,I]=(0,a.useState)(30);(0,a.useEffect)(()=>{(async()=>{try{T(!0),P(null);const e=await y.pm.getPerformanceMetrics();e&&e.metrics&&f([{name:"Response Time",value:e.metrics.responseTime||"N/A",change:"+12ms",trend:"up"},{name:"Error Rate",value:e.metrics.errorRate||"N/A",change:"-0.1%",trend:"down"},{name:"Throughput",value:e.metrics.throughput||"N/A",change:"+150",trend:"up"},{name:"Uptime",value:e.metrics.uptime||"N/A",change:"+0.1%",trend:"up"}]);const t=await y.pm.getAlerts("all");t&&Array.isArray(t.alerts)&&b(t.alerts);const s=await y.pm.getSystemHealth();s&&N({overall:s.overall||"healthy",services:s.services||4,issues:s.issues||0,lastCheck:(new Date).toLocaleTimeString(),services:s.services||[{name:"Web Server",status:"healthy",uptime:"99.9%",responseTime:"120ms"},{name:"Database",status:"warning",uptime:"99.5%",responseTime:"450ms"},{name:"API Gateway",status:"healthy",uptime:"99.8%",responseTime:"80ms"},{name:"Cache Service",status:"healthy",uptime:"99.7%",responseTime:"15ms"}]})}catch(e){P("Failed to load monitoring data")}finally{T(!1)}})()},[]),(0,a.useEffect)(()=>{if(!C)return;const e=setInterval(()=>{window.location.reload()},1e3*k);return()=>clearInterval(e)},[C,k]);const E=e=>{switch(e){case"healthy":return(0,v.jsx)(o.A,{className:"h-4 w-4 text-green-500"});case"warning":return(0,v.jsx)(i.A,{className:"h-4 w-4 text-yellow-500"});case"error":return(0,v.jsx)(l,{className:"h-4 w-4 text-red-500"});default:return(0,v.jsx)(d.A,{className:"h-4 w-4 text-gray-500"})}},R=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"error":return"bg-orange-100 text-orange-800 border-orange-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return(0,v.jsxs)("div",{className:"p-6 space-y-6",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Monitoring"}),(0,v.jsx)("p",{className:"text-muted-foreground",children:"Real-time system monitoring and alert management."})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,v.jsxs)(c.$n,{variant:C?"default":"outline",size:"sm",onClick:()=>O(!C),children:[(0,v.jsx)(m.A,{className:"h-4 w-4 mr-2 ".concat(C?"animate-spin":"")}),C?"Auto-refresh ON":"Auto-refresh OFF"]}),C&&(0,v.jsxs)("select",{value:k,onChange:e=>I(Number(e.target.value)),className:"px-2 py-1 text-sm border border-border rounded bg-background",children:[(0,v.jsx)("option",{value:15,children:"15s"}),(0,v.jsx)("option",{value:30,children:"30s"}),(0,v.jsx)("option",{value:60,children:"1m"}),(0,v.jsx)("option",{value:300,children:"5m"})]})]}),(0,v.jsxs)(c.$n,{variant:"outline",disabled:S,onClick:()=>window.location.reload(),children:[(0,v.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,v.jsxs)(c.$n,{disabled:!0,children:[(0,v.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Alert Settings"]})]})]}),A&&(0,v.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"string"===typeof A?A:JSON.stringify(A)}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((e,t)=>(0,v.jsxs)(n.Zp,{children:[(0,v.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,v.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:e.name}),(0,v.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,v.jsxs)(n.Wu,{children:[(0,v.jsx)("div",{className:"text-2xl font-bold text-foreground",children:e.value}),(0,v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:["up"===e.trend?(0,v.jsx)(p.A,{className:"h-3 w-3 text-green-500"}):(0,v.jsx)(x.A,{className:"h-3 w-3 text-blue-500"}),(0,v.jsx)("span",{className:"up"===e.trend?"text-green-500":"text-blue-500",children:e.change}),(0,v.jsx)("span",{children:"from last hour"})]})]})]},t))}),(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,v.jsxs)(n.Zp,{className:"lg:col-span-2",children:[(0,v.jsx)(n.aR,{children:(0,v.jsx)("div",{className:"flex items-center justify-between",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(n.ZB,{children:"System Alerts"}),(0,v.jsx)(n.BT,{children:"Recent alerts and notifications"})]})})}),(0,v.jsx)(n.Wu,{children:(0,v.jsx)("div",{className:"space-y-4",children:j.length>0?j.map(e=>(0,v.jsxs)("div",{className:"flex items-start space-x-4 p-4 rounded-lg border ".concat(R(e.severity)),children:[(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("h3",{className:"text-sm font-medium text-foreground",children:e.title}),(0,v.jsx)("span",{className:"text-xs text-muted-foreground",children:e.time})]}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),(0,v.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,v.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Service: ",e.service]}),(0,v.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("active"===e.status?"bg-red-100 text-red-800":"acknowledged"===e.status?"bg-yellow-100 text-yellow-800":"resolved"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,v.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(R(e.severity)),children:e.severity})]})]}),"active"===e.status&&(0,v.jsxs)(c.$n,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await y.pm.acknowledgeAlert(e),b(t=>t.map(t=>t.id===e?(0,r.A)((0,r.A)({},t),{},{status:"acknowledged"}):t))}catch(t){console.error("Failed to acknowledge alert:",t)}})(e.id),className:"text-xs",children:[(0,v.jsx)(o.A,{className:"h-3 w-3 mr-1"}),"Acknowledge"]})]},e.id)):(0,v.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,v.jsx)(g.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,v.jsx)("p",{children:"No alerts found"})]})})})]}),(0,v.jsxs)(n.Zp,{children:[(0,v.jsxs)(n.aR,{children:[(0,v.jsx)(n.ZB,{children:"System Health"}),(0,v.jsx)(n.BT,{children:"Overall system status and health"})]}),(0,v.jsx)(n.Wu,{children:(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("span",{className:"text-sm text-muted-foreground",children:"Overall Status"}),(0,v.jsx)("span",{className:"text-sm font-medium ".concat("healthy"===w.overall?"text-green-500":"warning"===w.overall?"text-yellow-500":"error"===w.overall?"text-red-500":"text-gray-500"),children:w.overall})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active Services"}),(0,v.jsx)("span",{className:"text-sm font-medium text-blue-500",children:(null===(e=w.services)||void 0===e?void 0:e.length)||0})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active Issues"}),(0,v.jsx)("span",{className:"text-sm font-medium ".concat(w.issues>0?"text-red-500":"text-green-500"),children:w.issues})]}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("span",{className:"text-sm text-muted-foreground",children:"Last Check"}),(0,v.jsx)("span",{className:"text-sm font-medium text-gray-500",children:w.lastCheck})]}),(0,v.jsxs)("div",{className:"border-t pt-4",children:[(0,v.jsx)("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Service Details"}),(0,v.jsx)("div",{className:"space-y-3",children:null===(t=w.services)||void 0===t?void 0:t.map((e,t)=>(0,v.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[E(e.status),(0,v.jsx)("span",{className:"text-sm font-medium",children:e.name})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,v.jsxs)("span",{children:["Uptime: ",e.uptime]}),(0,v.jsxs)("span",{children:["Response: ",e.responseTime]})]})]},t))})]})]})})]})]})]})}}}]);