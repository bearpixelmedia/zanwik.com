"use strict";(self.webpackChunkumbrella_dashboard_client=self.webpackChunkumbrella_dashboard_client||[]).push([[785],{2903:(e,s,t)=>{t.d(s,{Ay:()=>g,a5:()=>x,lu:()=>p,pm:()=>h,rh:()=>u});var r=t(2555),n=t(4813);const a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ynssliolfybuczopjfgn.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inluc3NsaW9sZnlidWN6b3BqZmduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NzU0NDIsImV4cCI6MjA2NzA1MTQ0Mn0.gUygOntZpba9_JVvuz4I6OdOjeqz-Bz29PXoerqWb8k"}.REACT_APP_API_URL||"https://money-production-55af.up.railway.app/api";class i extends Error{constructor(e,s,t,r){super(e),this.name="APIError",this.status=s,this.code=t,this.details=r,this.timestamp=(new Date).toISOString()}}const c=new Map,l=[];let o=!1;const d={requests:0,errors:0,averageResponseTime:0,totalResponseTime:0},m=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=await(async()=>{try{const{data:{session:e}}=await n.ND.auth.getSession();return null===e||void 0===e?void 0:e.access_token}catch(e){return console.error("Failed to get auth token:",e),null}})(),m=(0,r.A)({headers:(0,r.A)((0,r.A)({"Content-Type":"application/json"},t&&{Authorization:"Bearer ".concat(t)}),s.headers)},s);if(await(async e=>(e.requestId="req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.startTime=performance.now(),e.retryCount=e.retryCount||0,e))(m),"GET"===s.method||!s.method){const t=(e=>{const s=c.get(e);return s&&Date.now()-s.timestamp<3e5?s.data:(c.delete(e),null)})("".concat(e,"_").concat(JSON.stringify(s)));if(t)return t}const u=async()=>{try{const t=await fetch("".concat(a).concat(e),m);if(await(async(e,s)=>{const t=performance.now()-s.startTime;return d.requests++,d.totalResponseTime+=t,d.averageResponseTime=d.totalResponseTime/d.requests,t>1e3&&console.warn("Slow API request: ".concat(s.requestId," took ").concat(t.toFixed(2),"ms")),e})(t,m),!t.ok){const e=await t.json().catch(()=>({}));throw new i(e.message||"HTTP error! status: ".concat(t.status),t.status,e.code,e.details)}const r=await t.json();if("GET"===s.method||!s.method){((e,s)=>{c.set(e,{data:s,timestamp:Date.now()})})("".concat(e,"_").concat(JSON.stringify(s)),r)}return r}catch(t){if(d.errors++,((e,s)=>s<3&&([408,429,500,502,503,504].includes(e.status)||e.message.includes("network")||e.message.includes("timeout")))(t,m.retryCount)){m.retryCount++,console.warn("Retrying request (".concat(m.retryCount,"/3):"),e);const s=1e3*Math.pow(2,m.retryCount);return await new Promise(e=>setTimeout(e,s)),u()}throw console.error("API call failed:",{endpoint:e,requestId:m.requestId,error:t.message,status:t.status,retryCount:m.retryCount}),t}};return new Promise((e,s)=>{l.push({resolve:e,reject:s,requestFn:u}),(async()=>{if(!o&&0!==l.length){for(o=!0;l.length>0;){const{resolve:s,reject:t,requestFn:r}=l.shift();try{s(await r())}catch(e){t(e)}l.length>0&&await new Promise(e=>setTimeout(e,100))}o=!1}})()})},u={getDashboardOverview:()=>m("/analytics/dashboard/public"),getRevenueAnalytics:function(){return m("/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getUserAnalytics:function(){return m("/analytics/users?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getProjectPerformance:function(){return m("/analytics/projects?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))},getCustomAnalytics:(e,s)=>m("/analytics/custom?startDate=".concat(e,"&endDate=").concat(s)),exportAnalytics:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"30d",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"csv";return m("/analytics/export?type=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all","&period=").concat(e,"&format=").concat(s))}},x={getPaymentMethods:()=>m("/payments/methods"),addPaymentMethod:e=>m("/payments/methods",{method:"POST",body:JSON.stringify({paymentMethodId:e})}),removePaymentMethod:e=>m("/payments/methods/".concat(e),{method:"DELETE"}),getSubscriptions:()=>m("/payments/subscriptions"),createSubscription:(e,s)=>m("/payments/subscriptions",{method:"POST",body:JSON.stringify({priceId:e,paymentMethodId:s})}),cancelSubscription:e=>m("/payments/subscriptions/".concat(e,"/cancel"),{method:"POST"}),reactivateSubscription:e=>m("/payments/subscriptions/".concat(e,"/reactivate"),{method:"POST"}),getInvoices:()=>m("/payments/invoices"),createPaymentIntent:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",t=arguments.length>2?arguments[2]:void 0;return m("/payments/payment-intent",{method:"POST",body:JSON.stringify({amount:e,currency:s,description:t})})},getRevenueAnalytics:function(){return m("/payments/analytics/revenue?period=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d"))}},h={getAlerts:function(){return m("/monitoring/alerts?severity=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all"))},getPerformanceMetrics:()=>m("/monitoring/performance"),getSystemHealth:()=>m("/monitoring/health"),acknowledgeAlert:e=>m("/monitoring/alerts/".concat(e,"/acknowledge"),{method:"POST"}),getLogs:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return m("/monitoring/logs?serviceId=".concat(e,"&limit=").concat(s))}},p={getProfile:()=>m("/users/profile"),updateProfile:e=>m("/users/profile",{method:"PUT",body:JSON.stringify(e)}),getTeamMembers:()=>m("/users/team"),inviteTeamMember:(e,s)=>m("/users/invite",{method:"POST",body:JSON.stringify({email:e,role:s})}),removeTeamMember:e=>m("/users/team/".concat(e),{method:"DELETE"})};let y=null,j=0;const g={projects:{getProjects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&s.append(t,r)}),m("/projects?".concat(s.toString()))},getProject:e=>m("/projects/".concat(e)),createProject:e=>m("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,s)=>m("/projects/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteProject:e=>m("/projects/".concat(e),{method:"DELETE"}),getProjectAnalytics:e=>m("/projects/".concat(e,"/analytics")),getCategories:()=>m("/projects/categories/list"),getStats:()=>m("/projects/stats/overview")},analytics:u,payments:x,infrastructure:{getSystemStatus:()=>m("/infrastructure/status"),getServiceMetrics:()=>m("/infrastructure/metrics"),getResourceUsage:()=>m("/infrastructure/resources"),deployService:e=>m("/infrastructure/deploy",{method:"POST",body:JSON.stringify(e)}),restartService:e=>m("/infrastructure/services/".concat(e,"/restart"),{method:"POST"})},monitoring:h,users:p,healthCheck:()=>{const e=new AbortController,s=setTimeout(()=>e.abort(),5e3);return fetch("".concat(a,"/health"),{signal:e.signal}).then(e=>(clearTimeout(s),e.json())).catch(e=>{throw clearTimeout(s),new i("Health check failed",0,"HEALTH_CHECK_FAILED",{error:e.message})})},initializeWebSocket:e=>{y&&y.close();const s=()=>{try{y=new WebSocket("".concat(a.replace("http","ws"),"/ws?userId=").concat(e)),y.onopen=()=>{console.log("WebSocket connected"),j=0},y.onmessage=e=>{try{const s=JSON.parse(e.data);switch(s.type){case"alert":case"metric":case"notification":break;default:console.log("WebSocket message:",s)}}catch(s){console.error("Failed to parse WebSocket message:",s)}},y.onclose=()=>{if(console.log("WebSocket disconnected"),j<5){j++;const e=1e3*Math.pow(2,j);setTimeout(()=>s(),e)}},y.onerror=e=>{console.error("WebSocket error:",e)}}catch(t){console.error("Failed to initialize WebSocket:",t)}};return s(),y}}},4094:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(5325).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},5293:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(5325).A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},6044:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(5325).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},7426:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(5325).A)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},9785:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var r=t(9950),n=t(4546),a=t(2748),i=t(5619),c=t(4094),l=t(6044),o=t(5766),d=t(7764),m=t(907),u=t(5975),x=t(5325);const h=(0,x.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var p=t(5416),y=t(4298);const j=(0,x.A)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var g=t(9029);const f=(0,x.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var v=t(5293);const N=(0,x.A)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var b=t(8306),w=t(7426),k=t(9981),S=t(4245),A=t(2330),C=t(2903),P=t(4414);const T=()=>{console.log("Rendering Infrastructure");const[e,s]=(0,r.useState)("all"),[t,x]=(0,r.useState)(!0),[T,I]=(0,r.useState)(null),[D,O]=(0,r.useState)(!1),[E,U]=(0,r.useState)(30),[M,R]=(0,r.useState)(!1),[z,_]=(0,r.useState)(!1),[W,F]=(0,r.useState)(null),[Z,q]=(0,r.useState)(!1),[B,J]=(0,r.useState)({services:[],systemStatus:{},resourceUsage:{},metrics:{},deployments:[]});(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{if(!D)return;const e=setInterval(()=>{L()},1e3*E);return()=>clearInterval(e)},[D,E]);const L=async()=>{try{x(!0),I(null);const e=await C.Ay.infrastructure.getSystemStatus(),s=await C.Ay.infrastructure.getServiceMetrics(),t=await C.Ay.infrastructure.getResourceUsage();J({services:s.services||[],systemStatus:e.status||{},resourceUsage:t.usage||{},metrics:s.metrics||{},deployments:s.deployments||[]})}catch(e){console.error("Failed to fetch infrastructure data:",e),I("Failed to load infrastructure data"),J({services:[{id:1,name:"Web Server",type:"server",status:"healthy",uptime:"99.9%",cpu:45,memory:67,disk:23,lastDeploy:"2 hours ago",version:"v2.1.0",environment:"production",port:80,healthCheck:"passing"},{id:2,name:"Database",type:"database",status:"healthy",uptime:"99.8%",cpu:32,memory:89,disk:45,lastDeploy:"1 day ago",version:"v1.5.2",environment:"production",port:5432,healthCheck:"passing"},{id:3,name:"CDN",type:"cdn",status:"warning",uptime:"98.5%",cpu:12,memory:34,disk:8,lastDeploy:"3 days ago",version:"v1.2.1",environment:"production",port:443,healthCheck:"warning"},{id:4,name:"API Gateway",type:"api",status:"healthy",uptime:"99.7%",cpu:28,memory:56,disk:15,lastDeploy:"6 hours ago",version:"v3.0.0",environment:"production",port:8080,healthCheck:"passing"}],systemStatus:{totalServices:4,averageUptime:"99.5%",cpuUsage:29,memoryUsage:61},resourceUsage:{cpu:29,memory:61,disk:23,network:45},metrics:{uptimeChange:.2,cpuChange:-5,memoryChange:3},deployments:[{id:1,serviceId:1,version:"v2.1.0",status:"completed",timestamp:"2024-01-20T10:30:00Z",duration:"2m 15s"},{id:2,serviceId:4,version:"v3.0.0",status:"completed",timestamp:"2024-01-20T04:15:00Z",duration:"1m 45s"}]})}finally{x(!1)}},$=async(e,s)=>{try{if("restart"!==s)return void console.error("Unknown action:",s);await C.Ay.infrastructure.restartService(e),L()}catch(t){console.error("Failed to ".concat(s," service:"),t),alert("Failed to ".concat(s," service"))}},H=e=>{switch(e){case"healthy":return"text-green-500";case"warning":return"text-yellow-500";case"error":return"text-red-500";default:return"text-gray-500"}},V=e=>{switch(e){case"healthy":return(0,P.jsx)(n.A,{className:"h-4 w-4 text-green-500"});case"warning":return(0,P.jsx)(a.A,{className:"h-4 w-4 text-yellow-500"});case"error":return(0,P.jsx)(a.A,{className:"h-4 w-4 text-red-500"});default:return(0,P.jsx)(i.A,{className:"h-4 w-4 text-gray-500"})}},G=e=>{switch(e){case"server":default:return(0,P.jsx)(c.A,{className:"h-5 w-5"});case"database":return(0,P.jsx)(l.A,{className:"h-5 w-5"});case"cdn":return(0,P.jsx)(o.A,{className:"h-5 w-5"});case"api":return(0,P.jsx)(d.A,{className:"h-5 w-5"})}},K=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},X="all"===e?B.services:B.services.filter(s=>s.status===e);return t?(0,P.jsx)("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)(m.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,P.jsx)("p",{className:"text-muted-foreground",children:"Loading infrastructure data..."})]})}):(0,P.jsxs)("div",{className:"p-6 space-y-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Infrastructure"}),(0,P.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage your system resources and services."})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,P.jsxs)(A.$n,{variant:D?"default":"outline",size:"sm",onClick:()=>O(!D),children:[(0,P.jsx)(u.A,{className:"h-4 w-4 mr-2 ".concat(D?"animate-spin":"")}),D?"Auto-refresh ON":"Auto-refresh OFF"]}),D&&(0,P.jsxs)("select",{value:E,onChange:e=>U(Number(e.target.value)),className:"px-2 py-1 text-sm border border-border rounded bg-background",children:[(0,P.jsx)("option",{value:15,children:"15s"}),(0,P.jsx)("option",{value:30,children:"30s"}),(0,P.jsx)("option",{value:60,children:"1m"}),(0,P.jsx)("option",{value:300,children:"5m"})]})]}),(0,P.jsxs)(A.$n,{variant:"outline",onClick:()=>R(!0),children:[(0,P.jsx)(h,{className:"h-4 w-4 mr-2"}),"Deploy Service"]}),(0,P.jsxs)(A.$n,{children:[(0,P.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Manage Services"]})]})]}),T&&(0,P.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"string"===typeof T?T:JSON.stringify(T)}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,P.jsxs)(S.Zp,{children:[(0,P.jsxs)(S.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,P.jsx)(S.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Total Services"}),(0,P.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,P.jsxs)(S.Wu,{children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-foreground",children:B.systemStatus.totalServices||B.services.length}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[(0,P.jsx)(n.A,{className:"h-3 w-3 text-green-500"}),(0,P.jsx)("span",{className:"text-green-500",children:"All operational"})]})]})]}),(0,P.jsxs)(S.Zp,{children:[(0,P.jsxs)(S.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,P.jsx)(S.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Average Uptime"}),(0,P.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,P.jsxs)(S.Wu,{children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-foreground",children:B.systemStatus.averageUptime||"99.5%"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[(0,P.jsx)(y.A,{className:"h-3 w-3 text-green-500"}),(0,P.jsxs)("span",{className:"text-green-500",children:["+",B.metrics.uptimeChange||0,"%"]}),(0,P.jsx)("span",{children:"from last month"})]})]})]}),(0,P.jsxs)(S.Zp,{children:[(0,P.jsxs)(S.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,P.jsx)(S.ZB,{className:"text-sm font-medium text-muted-foreground",children:"CPU Usage"}),(0,P.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})]}),(0,P.jsxs)(S.Wu,{children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[B.systemStatus.cpuUsage||B.resourceUsage.cpu||0,"%"]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[(0,P.jsx)(g.A,{className:"h-3 w-3 text-green-500"}),(0,P.jsxs)("span",{className:"text-green-500",children:[B.metrics.cpuChange||0,"%"]}),(0,P.jsx)("span",{children:"from last week"})]})]})]}),(0,P.jsxs)(S.Zp,{children:[(0,P.jsxs)(S.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,P.jsx)(S.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Memory Usage"}),(0,P.jsx)(f,{className:"h-4 w-4 text-muted-foreground"})]}),(0,P.jsxs)(S.Wu,{children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[B.systemStatus.memoryUsage||B.resourceUsage.memory||0,"%"]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[(0,P.jsx)(y.A,{className:"h-3 w-3 text-yellow-500"}),(0,P.jsxs)("span",{className:"text-yellow-500",children:["+",B.metrics.memoryChange||0,"%"]}),(0,P.jsx)("span",{children:"from last week"})]})]})]})]}),(0,P.jsxs)(S.Zp,{children:[(0,P.jsx)(S.aR,{children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(S.ZB,{children:"Service Status"}),(0,P.jsx)(S.BT,{children:"Real-time status of all infrastructure services"})]}),(0,P.jsxs)("div",{className:"flex space-x-2",children:[(0,P.jsxs)(A.$n,{variant:"all"===e?"default":"outline",size:"sm",onClick:()=>s("all"),children:["All (",B.services.length,")"]}),(0,P.jsxs)(A.$n,{variant:"healthy"===e?"default":"outline",size:"sm",onClick:()=>s("healthy"),children:["Healthy (",B.services.filter(e=>"healthy"===e.status).length,")"]}),(0,P.jsxs)(A.$n,{variant:"warning"===e?"default":"outline",size:"sm",onClick:()=>s("warning"),children:["Warning (",B.services.filter(e=>"warning"===e.status).length,")"]}),(0,P.jsxs)(A.$n,{variant:"error"===e?"default":"outline",size:"sm",onClick:()=>s("error"),children:["Error (",B.services.filter(e=>"error"===e.status).length,")"]})]})]})}),(0,P.jsx)(S.Wu,{children:X.length>0?(0,P.jsx)("div",{className:"space-y-4",children:X.map(e=>(0,P.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("div",{className:"flex-shrink-0",children:G(e.type)}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("h3",{className:"text-sm font-medium text-foreground",children:e.name}),(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(K(e.healthCheck)),children:e.healthCheck})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground mt-1",children:[(0,P.jsxs)("span",{children:["v",e.version]}),(0,P.jsx)("span",{children:e.environment}),(0,P.jsxs)("span",{children:["Port ",e.port]}),(0,P.jsxs)("span",{children:["Last deploy: ",e.lastDeploy]})]})]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[V(e.status),(0,P.jsx)("span",{className:"text-sm font-medium ".concat(H(e.status)),children:e.status})]}),(0,P.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",e.uptime]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsxs)("div",{className:"font-medium",children:[e.cpu,"%"]}),(0,P.jsx)("div",{children:"CPU"})]}),(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsxs)("div",{className:"font-medium",children:[e.memory,"%"]}),(0,P.jsx)("div",{children:"RAM"})]}),(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsxs)("div",{className:"font-medium",children:[e.disk,"%"]}),(0,P.jsx)("div",{children:"Disk"})]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)(A.$n,{variant:"outline",size:"sm",onClick:()=>$(e.id,"start"),disabled:"healthy"===e.status,children:(0,P.jsx)(v.A,{className:"h-3 w-3"})}),(0,P.jsx)(A.$n,{variant:"outline",size:"sm",onClick:()=>$(e.id,"stop"),disabled:"error"===e.status,children:(0,P.jsx)(N,{className:"h-3 w-3"})}),(0,P.jsx)(A.$n,{variant:"outline",size:"sm",onClick:()=>$(e.id,"restart"),children:(0,P.jsx)(u.A,{className:"h-3 w-3"})}),(0,P.jsx)(A.$n,{variant:"outline",size:"sm",onClick:()=>{F(e),_(!0)},children:(0,P.jsx)(b.A,{className:"h-3 w-3"})})]})]})]},e.id))}):(0,P.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,P.jsx)(c.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,P.jsx)("p",{children:"No services found"})]})})]}),(0,P.jsxs)(S.Zp,{children:[(0,P.jsxs)(S.aR,{children:[(0,P.jsx)(S.ZB,{children:"Recent Deployments"}),(0,P.jsx)(S.BT,{children:"Latest service deployments and their status"})]}),(0,P.jsx)(S.Wu,{children:B.deployments.length>0?(0,P.jsx)("div",{className:"space-y-4",children:B.deployments.map(e=>{const s=B.services.find(s=>s.id===e.serviceId);return(0,P.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)(w.A,{className:"h-5 w-5 text-blue-500"})}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("h3",{className:"text-sm font-medium text-foreground",children:[(null===s||void 0===s?void 0:s.name)||"Unknown Service"," -"," ",e.version]}),(0,P.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(K(e.status)),children:e.status}),(0,P.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Duration: ",e.duration]})]})]},e.id)})}):(0,P.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,P.jsx)(w.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,P.jsx)("p",{children:"No recent deployments"})]})})]}),M&&(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,P.jsxs)(S.Zp,{className:"w-full max-w-md mx-4",children:[(0,P.jsxs)(S.aR,{children:[(0,P.jsx)(S.ZB,{children:"Deploy Service"}),(0,P.jsx)(S.BT,{children:"Deploy a new service or update existing one"})]}),(0,P.jsxs)(S.Wu,{className:"space-y-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"-service-name-",children:"Service Name"}),(0,P.jsx)("input",{type:"text",placeholder:"Enter service name",className:"w-full mt-1 px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"-service-type-",children:"Service Type"}),(0,P.jsxs)("select",{className:"w-full mt-1 px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,P.jsx)("option",{value:"server",children:"Web Server"}),(0,P.jsx)("option",{value:"database",children:"Database"}),(0,P.jsx)("option",{value:"cdn",children:"CDN"}),(0,P.jsx)("option",{value:"api",children:"API Gateway"})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"-version-",children:"Version"}),(0,P.jsx)("input",{type:"text",placeholder:"v1.0.0",className:"w-full mt-1 px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"-environment-",children:"Environment"}),(0,P.jsxs)("select",{className:"w-full mt-1 px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,P.jsx)("option",{value:"production",children:"Production"}),(0,P.jsx)("option",{value:"staging",children:"Staging"}),(0,P.jsx)("option",{value:"development",children:"Development"})]})]}),(0,P.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,P.jsx)(A.$n,{variant:"outline",className:"flex-1",onClick:()=>R(!1),disabled:Z,children:"Cancel"}),(0,P.jsx)(A.$n,{className:"flex-1",onClick:()=>(async e=>{try{q(!0),await C.Ay.infrastructure.deployService(e),L(),R(!1)}catch(s){console.error("Failed to deploy service:",s),alert("Failed to deploy service")}finally{q(!1)}})({}),disabled:Z,children:Z?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(m.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deploying..."]}):"Deploy Service"})]})]})]})}),z&&W&&(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,P.jsxs)(S.Zp,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,P.jsx)(S.aR,{children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(S.ZB,{children:W.name}),(0,P.jsx)(S.BT,{children:"Service details and management"})]}),(0,P.jsx)(A.$n,{variant:"outline",size:"sm",onClick:()=>{_(!1),F(null)},children:"\xd7"})]})}),(0,P.jsxs)(S.Wu,{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Service Information"}),(0,P.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,P.jsx)("span",{children:W.type})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Version:"}),(0,P.jsxs)("span",{children:["v",W.version]})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Environment:"}),(0,P.jsx)("span",{children:W.environment})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Port:"}),(0,P.jsx)("span",{children:W.port})]})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Status"}),(0,P.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,P.jsx)("span",{className:H(W.status),children:W.status})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Uptime:"}),(0,P.jsx)("span",{children:W.uptime})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Health Check:"}),(0,P.jsx)("span",{className:(e=>{switch(e){case"passing":return"text-green-500";case"warning":return"text-yellow-500";case"failing":return"text-red-500";default:return"text-gray-500"}})(W.healthCheck),children:W.healthCheck})]}),(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("span",{className:"text-muted-foreground",children:"Last Deploy:"}),(0,P.jsx)("span",{children:W.lastDeploy})]})]})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Resource Usage"}),(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,P.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-blue-500",children:[W.cpu,"%"]}),(0,P.jsx)("div",{className:"text-sm text-muted-foreground",children:"CPU"})]}),(0,P.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-green-500",children:[W.memory,"%"]}),(0,P.jsx)("div",{className:"text-sm text-muted-foreground",children:"Memory"})]}),(0,P.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-purple-500",children:[W.disk,"%"]}),(0,P.jsx)("div",{className:"text-sm text-muted-foreground",children:"Disk"})]})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Actions"}),(0,P.jsxs)("div",{className:"flex space-x-2",children:[(0,P.jsxs)(A.$n,{variant:"outline",onClick:()=>$(W.id,"start"),disabled:"healthy"===W.status,children:[(0,P.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Start"]}),(0,P.jsxs)(A.$n,{variant:"outline",onClick:()=>$(W.id,"stop"),disabled:"error"===W.status,children:[(0,P.jsx)(N,{className:"h-4 w-4 mr-2"}),"Stop"]}),(0,P.jsxs)(A.$n,{variant:"outline",onClick:()=>$(W.id,"restart"),children:[(0,P.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Restart"]}),(0,P.jsxs)(A.$n,{variant:"outline",children:[(0,P.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Logs"]})]})]})]})]})})]})}}}]);